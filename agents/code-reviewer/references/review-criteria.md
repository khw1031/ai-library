# Code Review Criteria

> diff ë¶„ì„ì„ í†µí•´ ì „ë¬¸ê°€ ì§‘ë‹¨ì„ ë™ì ìœ¼ë¡œ êµ¬ì„±í•˜ê³ , í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
> **ì¤‘ìš”**: ë¬¸ì œ ì§„ë‹¨ë§Œ ìˆ˜í–‰í•˜ë©°, í•´ê²° ë°©ì•ˆì€ ì œì‹œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

## ë¦¬ë·° ì›ì¹™

### ì§„ë‹¨ ì „ìš© (Diagnosis Only)

ì´ ì—ì´ì „íŠ¸ëŠ” **ë¬¸ì œ ë°œê²¬ ë° ì§„ë‹¨**ì—ë§Œ ì§‘ì¤‘í•©ë‹ˆë‹¤:

| DO | DON'T |
|----|----|
| ë¬¸ì œê°€ **ë¬´ì—‡**ì¸ì§€ ê¸°ìˆ  | âŒ ì–´ë–»ê²Œ ê³ ì¹ ì§€ ì œì•ˆ |
| ë¬¸ì œì˜ **ìœ„ì¹˜** ëª…ì‹œ | âŒ ìˆ˜ì • ì½”ë“œ ì˜ˆì‹œ ì œê³µ |
| ë¬¸ì œì˜ **ì‹¬ê°ë„** ë¶„ë¥˜ | âŒ ë¦¬íŒ©í† ë§ ë°©í–¥ ì œì‹œ |
| ë¬¸ì œì˜ **ê·¼ê±°** ì„¤ëª… | âŒ ëŒ€ì•ˆ êµ¬í˜„ ë°©ë²• ì–¸ê¸‰ |

í•´ê²° ë°©ì•ˆì€ **refactor-master**ê°€ ì „ë¬¸ê°€ ì§‘ë‹¨ ê´€ì ì—ì„œ ìˆ˜ë¦½í•©ë‹ˆë‹¤.

---

## 1ë‹¨ê³„: ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘

ë¦¬ë·° ì‹œì‘ ì „ ë‹¤ìŒ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤:

### 1.1 Diff ë¶„ì„

```bash
git diff HEAD~1 --name-only
git diff HEAD~1 --stat
```

**ì¶”ì¶œ í•­ëª©:**
| ë¶„ì„ ëŒ€ìƒ | ì¶”ì¶œ ì •ë³´ | ìš©ë„ |
|----------|----------|------|
| íŒŒì¼ í™•ì¥ì | `.ts`, `.tsx`, `.py`, `.go` ë“± | ì–¸ì–´ë³„ ì „ë¬¸ê°€ í™œì„±í™” |
| ë³€ê²½ ê²½ë¡œ | `src/api/`, `components/`, `db/` | ë„ë©”ì¸ ì „ë¬¸ê°€ í™œì„±í™” |
| ë³€ê²½ ê·œëª¨ | ë¼ì¸ ìˆ˜, íŒŒì¼ ìˆ˜ | ë¦¬ë·° ê¹Šì´ ê²°ì • |
| íŒ¨í„´ ê°ì§€ | í…ŒìŠ¤íŠ¸, ë§ˆì´ê·¸ë ˆì´ì…˜, ì„¤ì • | íŠ¹í™” ê´€ì  ì ìš© |

### 1.2 í”„ë¡œì íŠ¸ êµ¬ì¡° íƒìƒ‰

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ êµ¬ì¡° íŒŒì•…
ls -la
cat package.json 2>/dev/null || cat pyproject.toml 2>/dev/null
```

### 1.3 í”„ë¡œì íŠ¸ Rules ë¡œë“œ

í”„ë¡œì íŠ¸ì— ì •ì˜ëœ ê·œì¹™ì„ ë¦¬ë·° ê¸°ì¤€ì— í†µí•©í•©ë‹ˆë‹¤.

```bash
# Rules ë””ë ‰í† ë¦¬ íƒìƒ‰
ls .claude/rules/*.md 2>/dev/null
ls .claude/rules/**/RULE.md 2>/dev/null

# í”„ë¡œì íŠ¸ CLAUDE.md í™•ì¸
cat .claude/CLAUDE.md 2>/dev/null
```

**Rules ë°œê²¬ ì‹œ**: í•´ë‹¹ ê·œì¹™ì„ í•„ìˆ˜ ë¦¬ë·° ê¸°ì¤€ì— í†µí•©

---

## 2ë‹¨ê³„: ì „ë¬¸ê°€ ì§‘ë‹¨ ë™ì  êµ¬ì„±

diff ë¶„ì„ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê´€ë ¨ ì „ë¬¸ê°€ ê´€ì ì„ í™œì„±í™”í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì „ë¬¸ê°€ (í•­ìƒ í™œì„±í™”)

| ì „ë¬¸ê°€ | ê´€ì  | ê²€í†  ì˜ì—­ |
|--------|------|----------|
| Security Analyst | ë³´ì•ˆ ì·¨ì•½ì  | ì¸ì¦, ì…ë ¥ ê²€ì¦, ë°ì´í„° ë…¸ì¶œ |
| Code Quality Engineer | í’ˆì§ˆ ë° ìœ ì§€ë³´ìˆ˜ì„± | ì¤‘ë³µ, ë³µì¡ì„±, ë„¤ì´ë° |

### ì¡°ê±´ë¶€ ì „ë¬¸ê°€ (diff ê¸°ë°˜ í™œì„±í™”)

| ê°ì§€ ì¡°ê±´ | í™œì„±í™” ì „ë¬¸ê°€ | ì¶”ê°€ ê²€í†  |
|----------|--------------|----------|
| `**/*.tsx`, `**/components/**` | Frontend Architect | ì»´í¬ë„ŒíŠ¸ ì„¤ê³„, ìƒíƒœ ê´€ë¦¬, ì ‘ê·¼ì„± |
| `**/api/**`, `**/*.controller.*` | API Designer | RESTful ì›ì¹™, ì—ëŸ¬ ì²˜ë¦¬, ìŠ¤í‚¤ë§ˆ |
| `**/*.sql`, `**/migrations/**`, `**/prisma/**` | Database Engineer | ì¿¼ë¦¬ ìµœì í™”, ì¸ë±ìŠ¤, ë§ˆì´ê·¸ë ˆì´ì…˜ ì•ˆì „ì„± |
| `**/*.test.*`, `**/__tests__/**` | QA Engineer | í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€, ì—£ì§€ ì¼€ì´ìŠ¤, ëª¨í‚¹ |
| `**/auth/**`, `**/middleware/**` | Security Specialist | ì¸ì¦/ì¸ê°€, ì„¸ì…˜, í† í° ê´€ë¦¬ |
| `Dockerfile`, `*.yml`, `**/infra/**` | DevOps Engineer | ì»¨í…Œì´ë„ˆ, CI/CD, í™˜ê²½ ì„¤ì • |

### ì–¸ì–´ë³„ ì „ë¬¸ê°€

| ê°ì§€ íŒŒì¼ | í™œì„±í™” ì „ë¬¸ê°€ | ì–¸ì–´ íŠ¹í™” ê²€í†  |
|----------|--------------|---------------|
| `*.ts`, `*.tsx` | TypeScript Expert | íƒ€ì… ì•ˆì „ì„±, íƒ€ì… ê°€ë“œ, any ì‚¬ìš© |
| `*.py` | Python Expert | PEP8, íƒ€ì… íŒíŠ¸, ì˜ˆì™¸ ì²˜ë¦¬ |
| `*.go` | Go Expert | ì—ëŸ¬ í•¸ë“¤ë§, ê³ ë£¨í‹´ ì•ˆì „ì„±, ì¸í„°í˜ì´ìŠ¤ |
| `*.rs` | Rust Expert | ì†Œìœ ê¶Œ, ë¼ì´í”„íƒ€ì„, unsafe ì‚¬ìš© |

---

## 3ë‹¨ê³„: ë¦¬ë·° ê¸°ì¤€

### 3.1 í•„ìˆ˜ ê²€í†  (CRITICAL/MAJOR í›„ë³´)

#### ë³´ì•ˆ (Security Analyst)
- [ ] ì¸ì ì…˜ ì·¨ì•½ì  (SQL, XSS, Command)
- [ ] ì¸ì¦/ì¸ê°€ ìš°íšŒ ê°€ëŠ¥ì„±
- [ ] ë¯¼ê° ì •ë³´ ë…¸ì¶œ (API í‚¤, ë¹„ë°€ë²ˆí˜¸, í† í°)
- [ ] ì•ˆì „í•˜ì§€ ì•Šì€ ì—­ì§ë ¬í™”
- [ ] ê²½ë¡œ íƒìƒ‰ (Path Traversal)

#### ì•ˆì •ì„± (ëª¨ë“  ì „ë¬¸ê°€)
- [ ] ë¬´í•œ ë£¨í”„ / ì¬ê·€ ê°€ëŠ¥ì„±
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ / ë¦¬ì†ŒìŠ¤ ë¯¸í•´ì œ
- [ ] ë„/undefined ì—­ì°¸ì¡°
- [ ] ê²½ìŸ ì¡°ê±´ (Race Condition)
- [ ] ì˜ˆì™¸ ì²˜ë¦¬ ëˆ„ë½

### 3.2 ì¡°ê±´ë¶€ ê²€í†  (í™œì„±í™”ëœ ì „ë¬¸ê°€ ê¸°ì¤€)

#### Frontend Architect (í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ ì‹œ)
- [ ] ì»´í¬ë„ŒíŠ¸ ì±…ì„ ë¶„ë¦¬
- [ ] ìƒíƒœ ê´€ë¦¬ ì ì ˆì„±
- [ ] ë¦¬ë Œë”ë§ ìµœì í™”
- [ ] ì ‘ê·¼ì„± (a11y) ì¤€ìˆ˜
- [ ] ë°˜ì‘í˜• ì²˜ë¦¬

#### API Designer (API ë³€ê²½ ì‹œ)
- [ ] RESTful ì›ì¹™ ì¤€ìˆ˜
- [ ] ì ì ˆí•œ HTTP ìƒíƒœ ì½”ë“œ
- [ ] ìš”ì²­/ì‘ë‹µ ê²€ì¦
- [ ] ì—ëŸ¬ ì‘ë‹µ ì¼ê´€ì„±
- [ ] ë²„ì „ ê´€ë¦¬ ê³ ë ¤

#### Database Engineer (DB ë³€ê²½ ì‹œ)
- [ ] N+1 ì¿¼ë¦¬ ë¬¸ì œ
- [ ] ì¸ë±ìŠ¤ í™œìš©
- [ ] íŠ¸ëœì­ì…˜ ì ì ˆì„±
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°± ê°€ëŠ¥ì„±
- [ ] ë°ì´í„° ì •í•©ì„±

### 3.3 í”„ë¡œì íŠ¸ Rules ê¸°ë°˜ ê²€í† 

```
[ë¡œë“œëœ Rulesì—ì„œ ê´€ë ¨ ê·œì¹™ ì ìš©]

ì˜ˆì‹œ:
- .claude/rules/typescript.md â†’ TypeScript ì»¨ë²¤ì…˜ ê²€ì¦
- .claude/rules/architecture.md â†’ ì•„í‚¤í…ì²˜ ì›ì¹™ ì¤€ìˆ˜ í™•ì¸
- .claude/rules/testing.md â†’ í…ŒìŠ¤íŠ¸ íŒ¨í„´ ê²€ì¦
```

#### Rulesì— PRD ì°¸ì¡°ê°€ ìˆëŠ” ê²½ìš°

Rules ë‚´ì— PRD ë¬¸ì„œ ê²½ë¡œë‚˜ ìš”êµ¬ì‚¬í•­ì´ ëª…ì‹œë˜ì–´ ìˆìœ¼ë©´ Business Analyst ê´€ì  í™œì„±í™”:

- [ ] ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€
- [ ] ì—£ì§€ ì¼€ì´ìŠ¤ ì²˜ë¦¬
- [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ì •í•©ì„±
- [ ] ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ì»¤ë²„ë¦¬ì§€

---

## 4ë‹¨ê³„: ë¦¬ë·° ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤

### 4.1 ë¶„ì„ ì‹œì‘

```
í™œì„±í™”ëœ ì „ë¬¸ê°€: {ë™ì ìœ¼ë¡œ ê²°ì •ëœ ì „ë¬¸ê°€ ëª©ë¡}
ì°¸ì¡° Rules: {ë¡œë“œëœ Rules ëª©ë¡}
```

### 4.2 ì „ë¬¸ê°€ë³„ êµì°¨ ê²€ì¦

ê° í™œì„±í™”ëœ ì „ë¬¸ê°€ ê´€ì ì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ê²€í† :

```
[Security Analyst ê´€ì ]
â†’ ë³´ì•ˆ ì·¨ì•½ì  ìŠ¤ìº”

[Code Quality Engineer ê´€ì ]
â†’ í’ˆì§ˆ ë° ìœ ì§€ë³´ìˆ˜ì„± ê²€í† 

[{ì¡°ê±´ë¶€ ì „ë¬¸ê°€} ê´€ì ]
â†’ ë„ë©”ì¸ íŠ¹í™” ê²€í† 

[Rules ê²€ì¦]
â†’ í”„ë¡œì íŠ¸ ê·œì¹™ ì¤€ìˆ˜ í™•ì¸
```

### 4.3 ì´ìŠˆ í†µí•© ë° ìš°ì„ ìˆœìœ„ ê²°ì •

| ë“±ê¸‰ | ê¸°ì¤€ | ì¡°ì¹˜ |
|------|------|------|
| CRITICAL | ë³´ì•ˆ ì·¨ì•½ì , ë°ì´í„° ì†ì‹¤ ìœ„í—˜, ì‹œìŠ¤í…œ ì¥ì•  | ì¦‰ì‹œ ìˆ˜ì • í•„ìˆ˜ |
| MAJOR | ê¸°ëŠ¥ ì˜¤ë¥˜, ì‹¬ê°í•œ ì„±ëŠ¥ ì €í•˜, Rules ìœ„ë°˜ | ì»¤ë°‹ ì „ ìˆ˜ì • ê¶Œì¥ |
| MEDIUM | í’ˆì§ˆ ì €í•˜, ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€ | ê°œì„  ê¶Œì¥ |
| LOW | ìŠ¤íƒ€ì¼, ì»¨ë²¤ì…˜, ì‚¬ì†Œí•œ ê°œì„  | ì„ íƒì  ê°œì„  |

---

## ì´ìŠˆ ê¸°ìˆ  í˜•ì‹

### ì˜¬ë°”ë¥¸ ì§„ë‹¨ ì˜ˆì‹œ (DO)

```markdown
| File | Line | Issue Type | Description | Evidence |
|------|------|------------|-------------|----------|
| src/auth.ts | 45 | SQL Injection | ì‚¬ìš©ì ì…ë ¥ `userId`ê°€ ê²€ì¦ ì—†ì´ SQL ì¿¼ë¦¬ì— ì§ì ‘ ì‚½ì…ë¨. ê³µê²©ìê°€ ì„ì˜ SQL ì‹¤í–‰ ê°€ëŠ¥. | `query = "SELECT * FROM users WHERE id = " + userId` |
| src/api/users.ts | 78 | N+1 Query | ë£¨í”„ ë‚´ì—ì„œ ê°œë³„ ì¿¼ë¦¬ ì‹¤í–‰. ì‚¬ìš©ì 100ëª… ì¡°íšŒ ì‹œ 101ê°œ ì¿¼ë¦¬ ë°œìƒ. | `users.forEach(u => db.query(...))` |
| src/components/Form.tsx | 120 | Missing Error Handling | API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ ì—†ìŒ. ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°± ë¶ˆê°€. | `fetch(...).then(...)` (catch ì—†ìŒ) |
```

### ê¸ˆì§€ëœ íŒ¨í„´ (DON'T)

```markdown
# âŒ í•´ê²° ë°©ì•ˆ í¬í•¨ - ê¸ˆì§€
| src/auth.ts | 45 | SQL Injection | Prepared Statementë¥¼ ì‚¬ìš©í•˜ì„¸ìš”: `query = "SELECT * FROM users WHERE id = ?", [userId]` |

# âŒ ìˆ˜ì • ì½”ë“œ ì˜ˆì‹œ - ê¸ˆì§€
| src/api/users.ts | 78 | N+1 Query | Includeë¥¼ ì‚¬ìš©í•˜ì„¸ìš”: `db.users.findMany({ include: { posts: true } })` |

# âŒ ë¦¬íŒ©í† ë§ ë°©í–¥ ì œì‹œ - ê¸ˆì§€
| src/components/Form.tsx | 120 | Missing Error Handling | try-catchë¡œ ê°ì‹¸ê³  ì—ëŸ¬ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ì„¸ìš”. |
```

---

## ë¦¬ë·° ì¶œë ¥ í˜•ì‹

```markdown
## ë¦¬ë·° ì»¨í…ìŠ¤íŠ¸

- **í™œì„±í™”ëœ ì „ë¬¸ê°€**: Security Analyst, Frontend Architect, TypeScript Expert
- **ì°¸ì¡° Rules**: typescript.md, react.md

## ì „ë¬¸ê°€ë³„ í”¼ë“œë°±

### Security Analyst
{ë³´ì•ˆ ê´€ì  ì§„ë‹¨ - ë¬¸ì œì ë§Œ ê¸°ìˆ }

### Frontend Architect
{í”„ë¡ íŠ¸ì—”ë“œ ê´€ì  ì§„ë‹¨ - ë¬¸ì œì ë§Œ ê¸°ìˆ }

### Rules ê²€ì¦
{í”„ë¡œì íŠ¸ ê·œì¹™ ìœ„ë°˜ ì‚¬í•­ - ìœ„ë°˜ ë‚´ìš©ë§Œ ê¸°ìˆ }

## í†µí•© ì´ìŠˆ ëª©ë¡

### ğŸ”´ CRITICAL
| Expert | File | Line | Issue Type | Description | Evidence |
|--------|------|------|------------|-------------|----------|

### ğŸŸ  MAJOR
| Expert | File | Line | Issue Type | Description | Evidence |
|--------|------|------|------------|-------------|----------|

### ğŸŸ¡ MEDIUM
...

### ğŸŸ¢ LOW
...

## Next Steps
â†’ refactor-master ì—ì´ì „íŠ¸ë¡œ ë¦¬íŒ©í† ë§ ê³„íš ìˆ˜ë¦½
```

---

## í™•ì¥: í”„ë¡œì íŠ¸ë³„ ì»¤ìŠ¤í…€ ì „ë¬¸ê°€

í•„ìš”ì‹œ ì•„ë˜ì— í”„ë¡œì íŠ¸ íŠ¹í™” ì „ë¬¸ê°€ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:

```markdown
### {í”„ë¡œì íŠ¸ëª…} íŠ¹í™” ì „ë¬¸ê°€

| ì „ë¬¸ê°€ | ê°ì§€ ì¡°ê±´ | ê²€í†  ì˜ì—­ |
|--------|----------|----------|
| Payment Expert | `**/payment/**` | ê²°ì œ ë¡œì§, ê¸ˆì•¡ ê³„ì‚°, íŠ¸ëœì­ì…˜ |
| AI/ML Engineer | `**/models/**`, `*.py` | ëª¨ë¸ ë¡œë”©, ì¶”ë¡  ìµœì í™” |
```

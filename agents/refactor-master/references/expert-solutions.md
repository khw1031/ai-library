# Expert Solutions Reference

> 전문가별 이슈 해결 패턴 및 전략 가이드

---

## Security Architect

### SQL Injection

**진단 패턴**:
- 문자열 연결로 쿼리 생성
- 사용자 입력 직접 삽입

**해결 전략**:
1. Prepared Statement / Parameterized Query 사용
2. ORM의 쿼리 빌더 활용
3. 입력 검증 레이어 추가

**검증 방법**:
- SQL Injection 페이로드 테스트
- 정적 분석 도구 실행

### XSS (Cross-Site Scripting)

**진단 패턴**:
- innerHTML 직접 사용
- 사용자 입력 미이스케이프 출력

**해결 전략**:
1. 프레임워크 제공 이스케이프 함수 사용
2. Content Security Policy 설정
3. DOMPurify 등 라이브러리 활용

### 인증/인가 우회

**진단 패턴**:
- 클라이언트 측 검증만 존재
- 권한 검사 누락

**해결 전략**:
1. 서버 측 인증 미들웨어 강화
2. Role-based 접근 제어 구현
3. JWT 검증 로직 추가

---

## Database Expert

### N+1 Query

**진단 패턴**:
- 루프 내 쿼리 실행
- Lazy Loading 과다 사용

**해결 전략**:
1. Eager Loading (Include/Join)
2. DataLoader 패턴 (GraphQL)
3. 쿼리 배치 처리

**검증 방법**:
- 쿼리 로깅으로 실행 횟수 확인
- 성능 테스트 전후 비교

### 인덱스 미사용

**진단 패턴**:
- LIKE '%keyword%' 패턴
- 함수 래핑된 컬럼 비교

**해결 전략**:
1. 적절한 인덱스 추가
2. 쿼리 패턴 수정
3. Full-text 검색 도입

### 트랜잭션 문제

**진단 패턴**:
- 트랜잭션 없이 다중 쿼리
- 장시간 트랜잭션

**해결 전략**:
1. 트랜잭션 범위 명확화
2. 낙관적/비관적 락 적용
3. 롤백 시나리오 처리

---

## Refactoring Specialist

### 중복 코드

**진단 패턴**:
- 동일 로직 복사-붙여넣기
- 유사 구조 반복

**해결 전략**:
1. 공통 함수/메서드 추출
2. 템플릿 메서드 패턴
3. 제네릭/타입 파라미터 활용

### 높은 복잡도

**진단 패턴**:
- 깊은 중첩 조건문
- 긴 함수 (50+ 라인)

**해결 전략**:
1. Early Return 패턴
2. 조건부 로직 추출
3. 전략 패턴 적용

### 강한 결합

**진단 패턴**:
- 직접 인스턴스 생성
- 전역 상태 의존

**해결 전략**:
1. 의존성 주입 (DI)
2. 인터페이스 추출
3. 팩토리 패턴 적용

---

## TypeScript Expert

### any 타입 사용

**진단 패턴**:
- 명시적 any
- 암묵적 any (tsconfig)

**해결 전략**:
1. 적절한 타입 정의
2. unknown + 타입 가드
3. 제네릭 활용

### 타입 안전성 부재

**진단 패턴**:
- 타입 단언 남용
- nullable 미처리

**해결 전략**:
1. strict 모드 활성화
2. Optional chaining 사용
3. 타입 가드 함수 작성

---

## Frontend Architect

### 컴포넌트 비대화

**진단 패턴**:
- 단일 컴포넌트 300+ 라인
- 다중 책임

**해결 전략**:
1. 프레젠테이션/컨테이너 분리
2. 커스텀 훅 추출
3. 컴포지션 패턴

### 불필요한 리렌더링

**진단 패턴**:
- 인라인 함수/객체
- memo 미사용

**해결 전략**:
1. useMemo/useCallback 적용
2. React.memo 사용
3. 상태 위치 최적화

### 상태 관리 혼란

**진단 패턴**:
- prop drilling
- 전역 상태 과다

**해결 전략**:
1. Context 적절히 분리
2. 상태 콜로케이션
3. 서버 상태 분리 (React Query 등)

---

## API Designer

### RESTful 원칙 위반

**진단 패턴**:
- 동사 기반 엔드포인트
- HTTP 메서드 오용

**해결 전략**:
1. 리소스 중심 URL 설계
2. 적절한 HTTP 메서드 사용
3. 상태 코드 표준화

### 에러 응답 비일관

**진단 패턴**:
- 에러 형식 불일치
- 상태 코드 혼란

**해결 전략**:
1. 에러 응답 스키마 통일
2. 에러 코드 체계화
3. 문서화 (OpenAPI)

---

## Reliability Engineer

### 에러 처리 누락

**진단 패턴**:
- try-catch 없음
- Promise 미처리

**해결 전략**:
1. 에러 바운더리 설정
2. 전역 에러 핸들러
3. 에러 모니터링 통합

### 재시도 로직 부재

**진단 패턴**:
- 일시적 장애 미대응
- 무한 대기

**해결 전략**:
1. 지수 백오프 재시도
2. Circuit Breaker 패턴
3. 타임아웃 설정

---

## 솔루션 문서화 형식

각 이슈 해결 시 다음 형식으로 문서화:

```markdown
### Issue #{n}: {title}

**Before**:
```{lang}
// 문제 코드
```

**After**:
```{lang}
// 해결 코드
```

**Rationale**:
{왜 이 방식을 선택했는지 설명}

**Testing**:
- [ ] 단위 테스트 추가
- [ ] 통합 테스트 확인
- [ ] 보안 테스트 (해당시)
```
